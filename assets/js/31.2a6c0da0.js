(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{440:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"数据接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据接口"}},[s._v("#")]),s._v(" 数据接口")]),s._v(" "),a("ul",[a("li",[s._v("申请接口")]),s._v(" "),a("li",[s._v("调试接口")]),s._v(" "),a("li",[s._v("调用接口")])]),s._v(" "),a("h4",{attrs:{id:"申请数据接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#申请数据接口"}},[s._v("#")]),s._v(" 申请数据接口")]),s._v(" "),a("ul",[a("li",[s._v("后端工程师：如Express开发的")]),s._v(" "),a("li",[s._v("模拟接口（Mock API）：如 rap2")]),s._v(" "),a("li",[s._v("第三方接口：如 和风天气")])]),s._v(" "),a("p",[s._v("和风天气接口")]),s._v(" "),a("ul",[a("li",[s._v("注册账号\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://id.qweather.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("创建应用并申请密钥\n"),a("ul",[a("li",[s._v("key是调用接口的凭证")])])]),s._v(" "),a("li",[s._v("开发集成（开发文档）\n"),a("ul",[a("li",[s._v("请求接口的语法")]),s._v(" "),a("li",[s._v("返回数据的示例")])])])]),s._v(" "),a("h4",{attrs:{id:"调试接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试接口"}},[s._v("#")]),s._v(" 调试接口")]),s._v(" "),a("ul",[a("li",[s._v("postman")]),s._v(" "),a("li",[s._v("loadrunner")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://insomnia.rest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("insomnia"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("insomnia")]),s._v(" "),a("ul",[a("li",[s._v("配置\n"),a("ul",[a("li",[s._v("接口调用中使用的公共内容，应该提升为变量，例如：key")]),s._v(" "),a("li",[s._v("不同的项目，具有不同的环境变量")])])]),s._v(" "),a("li",[s._v("使用\n"),a("ul",[a("li",[s._v("请求方法+请求地址+请求参数")])])])]),s._v(" "),a("p",[s._v("insomnia配置环境变量，变量使用 "+s._s(s.url))]),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base0.jpg"),alt:"foo"}}),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base1.jpg"),alt:"foo"}}),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base2.jpg"),alt:"foo"}}),s._v(" "),a("h4",{attrs:{id:"调用接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调用接口"}},[s._v("#")]),s._v(" 调用接口")]),s._v(" "),a("p",[s._v("wx.request")]),s._v(" "),a("h5",{attrs:{id:"接口调用报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口调用报错"}},[s._v("#")]),s._v(" 接口调用报错")]),s._v(" "),a("ul",[a("li",[s._v("报错内容\n"),a("ul",[a("li",[s._v("xxxxx不在以下 request 合法域名列表中")])])]),s._v(" "),a("li",[s._v("解决方案\n"),a("ul",[a("li",[s._v("开发阶段解决方案：不校验合法域名\n"),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base5.jpg"),alt:"foo"}})]),s._v(" "),a("li",[s._v("上线阶段解决方案：绑定请求接口域名\n"),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base3.jpg"),alt:"foo"}}),s._v(" "),a("img",{attrs:{src:s.$withBase("/images/weixin/insomnia-base4.jpg"),alt:"foo"}})])])])]),s._v(" "),a("p",[s._v("通过wx.getLocation获取位置信息需要在app.json中配置，如：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"permission"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scope.userLocation"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"desc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"根据您的当前位置展示天气"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);