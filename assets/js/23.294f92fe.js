(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{432:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"开发环境和生产环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发环境和生产环境"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/worktile/running-env.html#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%92%8C%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83",target:"_blank",rel:"noopener noreferrer"}},[t._v("开发环境和生产环境"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("uni-app")]),t._v(" 可通过 "),a("code",[t._v("process.env.NODE_ENV")]),t._v(" 判断当前环境是开发环境还是生产环境，一般用于连接测试服务器或生产服务器的动态切换。")]),t._v(" "),a("p",[t._v("在HBuilderX 中，点击「运行」编译出来的代码是开发环境，点击「发行」编译出来的代码是生产环境")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'开发环境'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'生产环境'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"判断平台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断平台"}},[t._v("#")]),t._v(" 判断平台")]),t._v(" "),a("blockquote",[a("p",[t._v("平台判断有2种场景，一种是在编译期判断，一种是在运行期判断。")])]),t._v(" "),a("blockquote",[a("p",[t._v("编译期判断编译期判断，即"),a("a",{attrs:{href:"https://uniapp.dcloud.io/platform",target:"_blank",rel:"noopener noreferrer"}},[t._v("条件编译"),a("OutboundLink")],1),t._v("，不同平台在编译出包后已经是不同的代码，")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #ifdef H5")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"只有h5平台才有alert方法"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// #endif")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如上代码只会编译到H5的发行包里，其他平台的包不会包含如上代码。")]),t._v("\n")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("运行期判断 运行期判断是指代码已经打入包中，仍然需要在运行期判断平台，此时可使用 "),a("code",[t._v("uni.getSystemInfoSync().platform")]),t._v(" 判断客户端环境是 Android、iOS 还是小程序开发工具")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uni"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSystemInfoSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'android'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'运行Android上'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ios'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'运行iOS上'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'运行在开发者工具上'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"跨端兼容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨端兼容"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://uniapp.dcloud.io/platform?id=%E8%B7%A8%E7%AB%AF%E5%85%BC%E5%AE%B9",target:"_blank",rel:"noopener noreferrer"}},[t._v("跨端兼容"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("uni-app 已将常用的组件、JS API 封装到框架中，开发者按照 uni-app 规范开发即可保证多平台兼容，大部分业务均可直接满足，但每个平台有自己的一些特性，因此会存在一些无法跨平台的情况。")]),t._v(" "),a("ul",[a("li",[t._v("大量写 if else，会造成代码执行性能低下和管理混乱。")]),t._v(" "),a("li",[t._v("编译到不同的工程后二次修改，会让后续升级变的很麻烦。")])]),t._v(" "),a("p",[t._v("在 C 语言中，通过 #ifdef、#ifndef 的方式，为 windows、mac 等不同 os 编译不同的代码。 "),a("code",[t._v("uni-app")]),t._v(" 参考这个思路，为 "),a("code",[t._v("uni-app")]),t._v(" 提供了条件编译手段，在一个工程里优雅的完成了平台个性化实现。")])]),t._v(" "),a("blockquote",[a("p",[t._v("条件编译是用特殊的注释作为标记，在编译时根据这些特殊的注释，将注释里面的代码编译到不同平台。")]),t._v(" "),a("p",[t._v("**写法：**以 #ifdef 或 #ifndef 加 "),a("strong",[t._v("%PLATFORM%")]),t._v(" 开头，以 #endif 结尾。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("\\#ifdef")]),t._v("：if defined 仅在某平台存在")]),t._v(" "),a("li",[a("code",[t._v("\\#ifndef")]),t._v("：if not defined 除了某平台均存在")]),t._v(" "),a("li",[a("strong",[t._v("%PLATFORM%")]),t._v("：平台名称")])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("%PLATFORM%")]),t._v(" "),a("strong",[t._v("可取值如下：")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("平台")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("APP-PLUS")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("App")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("APP-PLUS-NVUE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("App nvue")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("H5")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("H5")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-WEIXIN")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-ALIPAY")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("支付宝小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-BAIDU")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("百度小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-TOUTIAO")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("字节跳动小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-QQ")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("QQ小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP-360")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("360小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("MP")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序/支付宝小程序/百度小程序/字节跳动小程序/QQ小程序/360小程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("QUICKAPP-WEBVIEW")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("快应用通用(包含联盟、华为)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("QUICKAPP-WEBVIEW-UNION")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("快应用联盟")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("QUICKAPP-WEBVIEW-HUAWEI")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("快应用华为")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);